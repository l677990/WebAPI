<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		.warp {
			margin: 100px auto 0;
		}
		table {
			border-collapse: collapse;
			border-spacing: 0;
			border:1px solid skyblue;
			width: 500px;
		}
		table thead {
			background: skyblue;
		}
		th,
		td {
			border: 1px solid #d0d0d0;
			color: #404060;
			padding: 10px;
			margin: 0 auto;
		}
	</style>
</head>
<body>
	<div class="warp">
		<table>
			<thead>
				<tr>
					<th>
						<input type="checkbox" id='j_cbAll'>
					</th>
					<th>商品</th>
					<th>价钱</th>
				</tr>
			</thead>
			<tbody id='j_tb'>
				<tr>
					<td>
						<input type="checkbox">
					</td>
					<td>iphonex</td>
					<td>8000</td>
				</tr>
				<tr>
					<td>
						<input type="checkbox">
					</td>
					<td>ipad Pro</td>
					<td>5000</td>
				</tr>
				<tr>
					<td>
						<input type="checkbox">
					</td>
					<td>外星人笔记本</td>
					<td>50000</td>
				</tr>
			</tbody>
		</table>
		<input type="button" value="反 选" id='btn'>
	</div>

	<script>
		//1 全选
		//1.1 获取父checkbox,注册点击事件
		var j_cbAll = document.getElementById('j_cbAll');
		var j_tb = document.getElementById('j_tb');
		var inpus = j_tb.getElementsByTagName('input');
		j_cbAll.onclick = function() {
			//1.2 找到所有子的chechbox,让这些checkbox的状态根父级checkbox保持一致
			for (var i=0;i<inpus.length;i++) {
				var input = inpus[i];
					if (input.type == 'checkbox') {
					input.checked = this.checked;
				}
			}
		}
		//2当点击子的checkbox,如果所有的子checkbox都被选中了,让父的checkbox也选中
		for(var i=0;i<inpus.length;i++) {
			var input = inpus[i];
			if(input!='checkbox') {
				continue;
			}
			input.onclick = function() {
				var all = true;
				for (var i=0;i<inpus.length;i++) {
					var input = inpus[i]
					if(input.type !='checkbox') {
						continue;
					}
					if(!input.checked) {
						all=false;
					}
				}
				j_cbAll.checked = all;
			}
		}

		//如果有一个子的checkbox没有被选中,父的checkbox也不被选中

		//3反选
	</script>
</body>
</html>